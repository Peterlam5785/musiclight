<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月子中心声光疗愈完整解决方案</title>
    <!-- 引入谷歌字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- 引入 Font Awesome 6 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style>
        /* 全局样式 */
        body {
            font-family: 'Noto Sans SC', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #FFF8F4; /* 基础背景色 */
        }
        
        /* 页面区块样式 */
        .page-section {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 4rem 2rem;
            box-sizing: border-box;
        }

        /* 各个页面的背景色 */
        #cover-page { background-color: #FFF8F4; }
        #challenges-page { background-color: #FFF8F4; }
        #light-therapy-page { background-color: #C7D3BF; }
        #sound-healing-page { background-color: #E6D7E7; }
        #data-page { background-color: #FFF8F4; }
        #win-win-page { background-color: #FFF8F4; }
        #implementation-page { background-color: #FFF8F4; }
        
        /* 标题和副标题字体样式 */
        .title {
            font-family: 'Noto Serif SC', serif;
            color: #5A4A42;
        }
        .subtitle {
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 300;
            color: #6B5750;
        }
        
        /* 装饰性线条样式 */
        .decorative-line {
            height: 3px;
            background: linear-gradient(90deg, #C7D3BF 0%, #E6D7E7 100%);
            border-radius: 3px;
        }
        
        /* 突出显示的文字颜色 */
        .highlight {
            color: #A57F75;
            font-weight: 500;
        }

        /* 装饰性圆圈样式 */
        .accent-circle {
            position: absolute;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            filter: blur(50px);
        }

        /* 卡片样式 */
        .light-card, .value-card {
            background-color: #FFF8F4;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            max-width: 300px;
        }
        .light-card:hover, .value-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* 图标容器样式 */
        .icon-container {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        /* D3图表容器，确保响应式 */
        .d3-chart {
            width: 100%;
            height: 300px; /* 固定高度以保持美观 */
            margin-top: 2rem;
        }
        
        /* 光疗特效样式 */
        .light-effect {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .light-card:hover .light-effect {
            opacity: 0.7;
        }
        .red-light {
            background: radial-gradient(circle, rgba(255, 0, 0, 0.3) 0%, rgba(255, 0, 0, 0) 70%);
            animation: red-pulse 3s infinite alternate;
        }
        .blue-light {
            background: radial-gradient(circle, rgba(0, 191, 255, 0.3) 0%, rgba(0, 191, 255, 0) 70%);
            animation: blue-pulse 3s infinite alternate;
        }
        .interactive-light {
            background: linear-gradient(135deg, rgba(255, 105, 180, 0.3) 0%, rgba(135, 206, 250, 0.3) 50%, rgba(255, 255, 0, 0.3) 100%);
            background-size: 200% 200%;
            animation: interactive-pulse 5s infinite;
        }

        /* 动画关键帧 */
        @keyframes red-pulse { from { transform: scale(1); } to { transform: scale(1.1); } }
        @keyframes blue-pulse { from { transform: scale(1); } to { transform: scale(1.1); } }
        @keyframes interactive-pulse { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    </style>
</head>
<body>

<!-- 页面容器 -->
<main class="w-full mx-auto">

    <!-- 1. 封面页 -->
    <section id="cover-page" class="page-section text-center">
        <div class="accent-circle w-64 h-64 top-[-100px] right-[-80px]"></div>
        <div class="accent-circle w-40 h-40 bottom-[-10px] left-[100px]"></div>
        <div class="z-10 mt-8">
            <h1 class="title text-4xl md:text-6xl mb-6">月子中心声光疗愈解决方案</h1>
            <div class="decorative-line w-64 md:w-96 mx-auto mb-6"></div>
            <p class="subtitle text-lg md:text-2xl max-w-2xl">为产后妈妈解决<span class="highlight">情绪</span>·<span class="highlight">睡眠</span>·<span class="highlight">身体恢复</span>三大难题</p>
        </div>
        <div class="image-container z-10 my-8 md:my-12 w-[90%] max-w-[700px] h-auto rounded-xl overflow-hidden shadow-xl">
            <img src="https://picture-search.skywork.ai/aippt/image/sheet/5873531dedc9a4bb5e6c010604ef9e02.jpg" alt="母婴温馨时刻" class="w-full h-auto object-cover"/>
        </div>
    </section>

    <!-- 2. 三大挑战 -->
    <section id="challenges-page" class="page-section">
        <div class="z-10 text-center">
            <h1 class="title text-3xl md:text-4xl mb-4">产后妈妈面临的三大挑战</h1>
            <p class="subtitle text-lg md:text-xl max-w-2xl text-[#8D7B74]">关注妈妈的情绪、睡眠和身体恢复，是月子中心服务的核心</p>
        </div>
        <div id="challenge-chart" class="d3-chart max-w-3xl"></div>
    </section>

    <!-- 3. 光疗系统 -->
    <section id="light-therapy-page" class="page-section">
        <div class="z-10 text-center mb-8 md:mb-12">
            <h1 class="title text-3xl md:text-5xl font-semibold mb-4">科学光疗系统</h1>
            <div class="decorative-line w-48 md:w-96 mx-auto"></div>
            <p class="subtitle mt-4 text-sm md:text-xl text-[#6B5750]">利用<span class="highlight">专业光波</span>，精准呵护产后妈妈，加速恢复</p>
        </div>
        <div class="flex flex-col lg:flex-row gap-8 justify-center items-stretch w-full max-w-6xl z-10">
            <!-- 红光卡片 -->
            <div class="light-card flex-1 p-6 flex flex-col items-center relative overflow-hidden">
                <div class="light-effect red-light"></div>
                <div class="icon-container bg-[#F4E5E1] mb-4 z-10">
                    <i class="fas fa-heart text-4xl text-[#A57F75]"></i>
                </div>
                <h3 class="font-bold text-xl text-[#5A4A42] mb-2 z-10">红光</h3>
                <p class="text-center text-[#5A4A42] mb-3 z-10">660nm深红光</p>
                <div class="w-full bg-[#A57F75] rounded-lg p-3 mb-3 z-10 opacity-70">
                    <p class="text-center text-white font-bold">伤口愈合 & 疼痛缓解</p>
                </div>
                <p class="text-center text-[#5A4A42] text-sm z-10">通过增加线粒体活性，加速胶原蛋白合成，有效促进剖腹产或侧切伤口愈合，缓解乳腺疼痛</p>
            </div>

            <!-- 天青光卡片 -->
            <div class="light-card flex-1 p-6 flex flex-col items-center relative overflow-hidden">
                <div class="light-effect blue-light"></div>
                <div class="icon-container bg-[#C7D3BF] mb-4 z-10">
                    <i class="fas fa-moon text-4xl text-[#6B8E9F]"></i>
                </div>
                <h3 class="font-bold text-xl text-[#5A4A42] mb-2 z-10">天青光</h3>
                <p class="text-center text-[#5A4A42] mb-3 z-10">460-490nm天青光</p>
                <div class="w-full bg-[#6B8E9F] rounded-lg p-3 mb-3 z-10 opacity-70">
                    <p class="text-center text-white font-bold">改善睡眠 & 调节情绪</p>
                </div>
                <p class="text-center text-[#5A4A42] text-sm z-10">产后荷尔蒙波动及夜间哺乳常导致妈妈的昼夜节律紊乱，天青光能有效改善失眠和睡眠碎片化问题</p>
            </div>

            <!-- 互动光卡片 -->
            <div class="light-card flex-1 p-6 flex flex-col items-center relative overflow-hidden">
                <div class="light-effect interactive-light"></div>
                <div class="icon-container bg-[#E6D7E7] mb-4 z-10">
                    <i class="fas fa-lightbulb text-4xl text-[#8D7B74]"></i>
                </div>
                <h3 class="font-bold text-xl text-[#5A4A42] mb-2 z-10">互动光</h3>
                <p class="text-center text-[#5A4A42] mb-3 z-10">动态变化的柔和光影</p>
                <div class="w-full bg-[#E6D7E7] rounded-lg p-3 mb-3 z-10 opacity-70">
                    <p class="text-center text-white font-bold">情绪舒缓 & 亲子互动</p>
                </div>
                <p class="text-center text-[#5A4A42] text-sm z-10">创造安全感和趣味性环境，有效舒缓产后妈妈的紧张和焦虑情绪，增进母婴间的情感连接</p>
            </div>
        </div>
        <div class="mt-8 text-center text-sm text-[#5A4A42] opacity-70 z-10">
            <p>Meta分析表明，红光治疗组的伤口愈合总有效率显著高于对照组 (RR=1.21)</p>
        </div>
    </section>

    <!-- 4. 声音疗愈系统 -->
    <section id="sound-healing-page" class="page-section">
        <div class="z-10 text-center mb-8 md:mb-12">
            <h1 class="title text-3xl md:text-5xl font-semibold mb-4">专业声疗系统</h1>
            <div class="decorative-line w-48 md:w-96 mx-auto"></div>
            <p class="subtitle mt-4 text-sm md:text-xl text-[#6B5750]">利用<span class="highlight">自然之声</span>与<span class="highlight">定制旋律</span>，重塑身心和谐</p>
        </div>
        <div class="content-card w-full p-8 z-10 max-w-5xl">
            <p class="text-sm md:text-base text-[#5A4A42] leading-relaxed mb-6">
                声音疗愈系统通过集成多种声源与技术，为产后妈妈提供一个沉浸式、个性化的声学环境。这不仅有助于舒缓情绪，改善睡眠质量，更能通过特定的声波频率，促进身体的放松与恢复。
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="flex items-start">
                    <div class="icon-container bg-[#C7D3BF] flex-shrink-0">
                        <i class="fas fa-cloud-sun text-2xl text-[#8D7B74]"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="font-bold text-xl text-[#5A4A42]">自然白噪音</h3>
                        <p class="text-sm text-[#8D7B74]">
                            精选雨滴、海浪、森林等多种自然白噪音，有效屏蔽环境杂音，帮助其更快进入深度睡眠。
                        </p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="icon-container bg-[#A57F75] flex-shrink-0">
                        <i class="fas fa-headphones text-2xl text-white"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="font-bold text-xl text-[#5A4A42]">定制化音乐</h3>
                        <p class="text-sm text-[#8D7B74]">
                            根据妈妈的实时情绪和生理数据，智能生成舒缓、轻柔的定制化音乐，缓解焦虑，促进身心放松。
                        </p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="icon-container bg-[#6B8E9F] flex-shrink-0">
                        <i class="fas fa-spa text-2xl text-white"></i>
                    </div>
                    <div class="ml-4">
                        <h3 class="font-bold text-xl text-[#5A4A42]">声波震动按摩</h3>
                        <p class="text-sm text-[#8D7B74]">
                            结合声波技术，通过轻微的震动按摩，作用于肌肉和组织深层，有效缓解产后身体疲劳。
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="d3-chart max-w-5xl">
            <svg id="sound-waves" class="w-full h-full"></svg>
        </div>
    </section>

    <!-- 5. 效果显著，数据说话 -->
    <section id="data-page" class="page-section">
        <div class="z-10 text-center">
            <h1 class="title text-3xl md:text-4xl mb-4">效果显著，数据说话</h1>
            <p class="subtitle text-lg md:text-xl text-[#8D7B74]">产后情绪和睡眠得到显著改善</p>
        </div>
        <div class="flex flex-col lg:flex-row items-center justify-center gap-8 w-full max-w-5xl mt-8">
            <div class="w-full lg:w-1/2 p-4 bg-[#F4E5E1] rounded-xl shadow-lg">
                <h3 class="text-center text-xl font-bold text-[#A57F75] mb-4">产后情绪改善度</h3>
                <div id="emotion-chart" class="d3-chart h-64"></div>
            </div>
            <div class="w-full lg:w-1/2 p-4 bg-[#F4E5E1] rounded-xl shadow-lg">
                <h3 class="text-center text-xl font-bold text-[#6B8E9F] mb-4">产后睡眠改善度</h3>
                <div id="sleep-chart" class="d3-chart h-64"></div>
            </div>
        </div>
    </section>

    <!-- 6. 双赢价值，共创未来 -->
    <section id="win-win-page" class="page-section">
        <div class="z-10 text-center">
            <h1 class="title text-3xl md:text-4xl mb-4">双赢价值，共创未来</h1>
            <p class="subtitle text-lg md:text-xl text-[#8D7B74]">赋能月子中心，提升品牌竞争力</p>
        </div>
        <div id="value-chart" class="d3-chart max-w-3xl"></div>
    </section>

    <!-- 7. 3步落地 -->
    <section id="implementation-page" class="page-section">
        <div class="z-10 text-center">
            <h1 class="title text-3xl md:text-4xl mb-4">3步轻松落地</h1>
            <p class="subtitle text-lg md:text-xl text-[#8D7B74]">从方案设计到持续优化，我们全程陪伴</p>
        </div>
        <div id="timeline-chart" class="d3-chart max-w-5xl h-40 mt-8"></div>
        <div class="flex flex-wrap justify-center gap-4 mt-8 w-full max-w-5xl text-center text-[#8D7B74]">
            <div class="flex-1 min-w-[200px] p-4 bg-[#F4E5E1] rounded-xl shadow-md">
                <p class="font-bold text-lg mb-1">方案设计与定制</p>
                <p class="text-sm">专业团队根据月子中心实际情况，定制声光疗愈方案</p>
            </div>
            <div class="flex-1 min-w-[200px] p-4 bg-[#F4E5E1] rounded-xl shadow-md">
                <p class="font-bold text-lg mb-1">实施与培训</p>
                <p class="text-sm">指导样板房建设，并对一线服务人员进行专业培训</p>
            </div>
            <div class="flex-1 min-w-[200px] p-4 bg-[#F4E5E1] rounded-xl shadow-md">
                <p class="font-bold text-lg mb-1">效果评估与优化</p>
                <p class="text-sm">定期跟踪服务效果，根据反馈持续优化方案</p>
            </div>
        </div>
    </section>

</main>

<script>
    /**
     * D3.js 图表和动画渲染脚本
     * 所有图表和动画都封装在函数中，并在页面加载和窗口大小改变时调用，确保响应式。
     */

    // 绘制挑战图表 (来自 index2.html)
    function drawChallengeChart() {
        const data = [
            { challenge: "情绪波动", percentage: 90, color: "#A57F75" },
            { challenge: "睡眠障碍", percentage: 80, color: "#6B8E9F" },
            { challenge: "身体恢复", percentage: 75, color: "#8D7B74" }
        ];
        const chartContainer = document.getElementById('challenge-chart');
        if (!chartContainer) return;
        d3.select("#challenge-chart").selectAll("*").remove();
        
        const containerWidth = chartContainer.clientWidth;
        const margin = { top: 20, right: 20, bottom: 20, left: 150 };
        const width = containerWidth - margin.left - margin.right;
        const height = 250 - margin.top - margin.bottom;

        const svg = d3.select("#challenge-chart").append("svg")
            .attr("width", containerWidth).attr("height", 250)
            .append("g").attr("transform", `translate(${margin.left},${margin.top})`);
        
        const y = d3.scaleBand().range([0, height]).domain(data.map(d => d.challenge)).padding(0.4);
        const barHeight = y.bandwidth();
        const maxBarWidth = width;

        const barGroups = svg.selectAll(".bar-group").data(data).enter().append("g")
            .attr("transform", d => `translate(0, ${y(d.challenge)})`);
        
        barGroups.append("text").attr("x", -10).attr("y", barHeight / 2)
            .attr("text-anchor", "end").attr("dominant-baseline", "middle")
            .attr("fill", "#5A4A42").attr("font-size", "14px").text(d => d.challenge);
            
        barGroups.append("rect").attr("width", maxBarWidth).attr("height", barHeight)
            .attr("rx", 10).attr("ry", 10).attr("fill", "#F4E5E1").attr("opacity", 0.5);

        barGroups.append("rect").attr("width", 0).transition().duration(1000).ease(d3.easeElastic)
            .attr("width", d => (d.percentage / 100) * maxBarWidth)
            .attr("height", barHeight).attr("rx", 10).attr("ry", 10).attr("fill", d => d.color);
        
        barGroups.append("text").attr("x", d => (d.percentage / 100) * maxBarWidth - 20)
            .attr("y", barHeight / 2).attr("text-anchor", "end").attr("dominant-baseline", "middle")
            .attr("fill", "white").attr("font-size", "14px").attr("font-weight", "bold").text(d => d.percentage + "%");
    }

    // 绘制情绪和睡眠改善图表 (来自 index5.html)
    function drawImprovementCharts() {
        const emotionData = [
            { stage: "治疗前", score: 25, color: "#A57F75" },
            { stage: "治疗后", score: 12, color: "#C7D3BF" }
        ];
        const sleepData = [
            { stage: "治疗前", score: 18, color: "#6B8E9F" },
            { stage: "治疗后", score: 7, color: "#E6D7E7" }
        ];

        // 绘制情绪图表
        drawBarChart('#emotion-chart', emotionData, "情绪改善度", 30);
        // 绘制睡眠图表
        drawBarChart('#sleep-chart', sleepData, "睡眠改善度", 20);
    }

    function drawBarChart(selector, data, title, domainMax) {
        d3.select(selector).selectAll("*").remove();
        const chartContainer = document.querySelector(selector);
        if (!chartContainer) return;
        const containerWidth = chartContainer.clientWidth;
        const margin = { top: 30, right: 30, bottom: 30, left: 30 };
        const width = containerWidth - margin.left - margin.right;
        const height = 250 - margin.top - margin.bottom;

        const svg = d3.select(selector).append("svg")
            .attr("width", containerWidth).attr("height", 250)
            .append("g").attr("transform", `translate(${margin.left},${margin.top})`);
        
        const x = d3.scaleBand().range([0, width]).domain(data.map(d => d.stage)).padding(0.4);
        const y = d3.scaleLinear().range([height, 0]).domain([0, domainMax]);

        svg.append("g").attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(x).tickSize(0).tickPadding(10))
            .call(g => g.select(".domain").remove()).selectAll("text").attr("fill", "#5A4A42").attr("font-size", "16px");
            
        svg.append("g").call(d3.axisLeft(y).ticks(5).tickSize(-width))
            .call(g => g.select(".domain").remove()).call(g => g.selectAll(".tick line").attr("stroke-opacity", 0.1))
            .selectAll("text").attr("fill", "#8D7B74").attr("font-size", "12px");

        svg.selectAll(".bar").data(data).enter().append("rect").attr("class", "bar")
            .attr("x", d => x(d.stage)).attr("y", height).attr("width", x.bandwidth()).attr("height", 0)
            .transition().duration(1000).ease(d3.easeElastic)
            .attr("y", d => y(d.score)).attr("height", d => height - y(d.score))
            .attr("rx", 5).attr("ry", 5).attr("fill", d => d.color);

        svg.selectAll(".label").data(data).enter().append("text").attr("class", "label")
            .attr("x", d => x(d.stage) + x.bandwidth() / 2).attr("y", d => y(d.score) - 10)
            .attr("text-anchor", "middle").attr("font-size", "16px").attr("font-weight", "bold")
            .attr("fill", d => d.color).text(d => d.score);
    }
    
    // 绘制价值图表 (来自 index6.html)
    function drawValueChart() {
        const data = [
            { category: "提升客户满意度", value: 95, color: "#A57F75" },
            { category: "增加服务收入", value: 80, color: "#6B8E9F" },
            { category: "建立品牌口碑", value: 90, color: "#8D7B74" }
        ];
        const chartContainer = document.getElementById('value-chart');
        if (!chartContainer) return;
        d3.select("#value-chart").selectAll("*").remove();

        const containerWidth = chartContainer.clientWidth;
        const margin = { top: 20, right: 20, bottom: 20, left: 150 };
        const width = containerWidth - margin.left - margin.right;
        const height = 250 - margin.top - margin.bottom;

        const svg = d3.select("#value-chart").append("svg")
            .attr("width", containerWidth).attr("height", 250)
            .append("g").attr("transform", `translate(${margin.left}, ${margin.top})`);
        
        const y = d3.scaleBand().range([0, height]).domain(data.map(d => d.category)).padding(0.4);
        const barHeight = y.bandwidth();
        const maxBarWidth = width;

        const barGroups = svg.selectAll(".bar-group").data(data).enter().append("g")
            .attr("transform", d => `translate(0, ${y(d.category)})`);
        
        barGroups.append("rect").attr("width", maxBarWidth).attr("height", barHeight)
            .attr("rx", 15).attr("ry", 15).attr("fill", "#F4E5E1").attr("opacity", 0.5);
        
        barGroups.append("rect").attr("width", 0).transition().duration(1000).ease(d3.easeElastic)
            .attr("width", d => (d.value / 100) * maxBarWidth)
            .attr("height", barHeight).attr("rx", 15).attr("ry", 15).attr("fill", d => d.color);
        
        barGroups.append("text").attr("x", -20).attr("y", barHeight / 2)
            .attr("text-anchor", "end").attr("dominant-baseline", "middle")
            .attr("fill", "#5A4A42").attr("font-size", "14px").attr("font-weight", "bold").text(d => d.category);
        
        barGroups.append("text").attr("x", d => (d.value / 100) * maxBarWidth - 10)
            .attr("y", barHeight / 2).attr("text-anchor", "end").attr("dominant-baseline", "middle")
            .attr("fill", "white").attr("font-size", "14px").attr("font-weight", "bold").text(d => d.value + "%");
    }

    // 绘制时间线 (来自 index7.html)
    function drawTimelineChart() {
        d3.select("#timeline-chart").selectAll("*").remove();

        const timelineData = [
            { phase: "方案设计", position: 0.1, color: "#A57F75" },
            { phase: "样板房建设", position: 0.25, color: "#A57F75" },
            { phase: "设备采购", position: 0.4, color: "#6B8E9F" },
            { phase: "人员培训", position: 0.55, color: "#6B8E9F" },
            { phase: "服务推出", position: 0.7, color: "#8D7B74" },
            { phase: "持续优化", position: 0.85, color: "#8D7B74" }
        ];

        const chartContainer = document.getElementById('timeline-chart');
        if (!chartContainer) return;
        const containerWidth = chartContainer.clientWidth;
        const margin = { top: 20, right: 20, bottom: 20, left: 20 };
        const width = containerWidth - margin.left - margin.right;
        const height = 150 - margin.top - margin.bottom;

        const svg = d3.select("#timeline-chart").append("svg")
            .attr("width", containerWidth).attr("height", 150)
            .append("g").attr("transform", `translate(${margin.left}, ${margin.top})`);
        
        svg.append("line").attr("x1", 50).attr("y1", height / 2).attr("x2", width - 50).attr("y2", height / 2)
            .attr("stroke", "#C7D3BF").attr("stroke-width", 3);
        
        svg.selectAll("circle").data(timelineData).enter().append("circle")
            .attr("cx", d => 50 + (width - 100) * d.position).attr("cy", height / 2).attr("r", 8)
            .attr("fill", d => d.color).attr("stroke", "#FFF8F4").attr("stroke-width", 3);
            
        svg.selectAll("text.label").data(timelineData).enter().append("text").attr("class", "label")
            .attr("x", d => 50 + (width - 100) * d.position).attr("y", height / 2 - 20)
            .attr("text-anchor", "middle").attr("font-size", "14px").attr("fill", "#5A4A42").text(d => d.phase);
    }

    // 声音疗愈动画 (来自 index4.html)
    function animateSoundWaves() {
        const svg = d3.select("#sound-waves");
        const chartContainer = document.getElementById('sound-waves');
        if (!chartContainer) return;
        
        const containerWidth = chartContainer.clientWidth;
        const containerHeight = chartContainer.clientHeight;
        const width = containerWidth;
        const height = containerHeight;
        
        svg.attr("width", width).attr("height", height).selectAll("*").remove();

        const createCircle = (radius, opacity, color, duration, offset) => {
            const circle = svg.append("circle")
                .attr("cy", height / 2)
                .attr("r", radius)
                .attr("fill", color)
                .attr("opacity", opacity)
                .attr("cx", offset * width);

            const animate = () => {
                const currentWidth = d3.select("#sound-waves").node().clientWidth;
                circle.attr("cx", 0)
                    .transition().duration(duration).ease(d3.easeLinear)
                    .attr("cx", currentWidth)
                    .on("end", () => {
                        circle.attr("cx", 0).transition().duration(0).on("end", animate);
                    });
            };
            animate();
        };

        createCircle(50, 0.4, "#A57F75", 6000, 0.25);
        createCircle(70, 0.3, "#6B8E9F", 5000, 0.5);
        createCircle(60, 0.5, "#8D7B74", 4000, 0.75);
        createCircle(40, 0.6, "#E6D7E7", 7000, 0);
    }
    
    // 初始化所有图表和动画的函数
    function initializeContent() {
        drawChallengeChart();
        drawImprovementCharts();
        drawValueChart();
        drawTimelineChart();
        animateSoundWaves();
    }
    
    // 在页面加载完成后执行一次
    document.addEventListener('DOMContentLoaded', initializeContent);

    // 当窗口大小改变时，重新绘制图表和动画以适应新尺寸
    window.addEventListener('resize', initializeContent);
</script>

</body>
</html>
